<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Haskell 第一课：基础</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/dist/reveal.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/dist/theme/moon.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/plugin/highlight/monokai.css">
    <style>
        .reveal h1, .reveal h2, .reveal h3 {
            text-transform: none;
        }
        .reveal pre {
            width: 100%;
        }
        .reveal code {
            font-family: 'Courier New', monospace;
        }
        .concept-list {
            font-size: 0.8em;
            line-height: 1.6;
        }
        .small-text {
            font-size: 0.7em;
        }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">

            <!-- Slide 1: Title -->
            <section>
                <h1>Haskell 初学者课程</h1>
                <h2>第一课：基础</h2>
                <p>Lecture 1: Fundamentals</p>
            </section>

            <!-- Slide 2: FP - Functional Programming -->
            <section>
                <h2>FP — 函数式编程</h2>
                <h3>Functional Programming</h3>
                <p>函数式编程是一种编程范式</p>
                <p>函数是编程的主要构建块</p>
            </section>

            <!-- Slide 3: What is function? -->
            <section>
                <h2>什么是函数？</h2>
                <h3>What is function?</h3>
                <p>函数是可以执行以下操作的代码实体：</p>
                <ul>
                    <li>定义 (Define)</li>
                    <li>调用 (Call)</li>
                    <li>组合 (Compose)</li>
                    <li>作为参数传递 (Pass as argument)</li>
                    <li>检查 (Inspect)</li>
                </ul>
                <br><br>
                <p class="small-text">函数可能会：挂起、产生副作用、抛出异常、提前终止</p>
            </section>

            <!-- Slide 4: What is FP? -->
            <section>
                <h2>什么是函数式编程？</h2>
                <h3>What is FP?</h3>
                <blockquote>
                    函数式编程是一种编程范式，其中<strong>函数</strong>是主要的构建块。
                </blockquote>
                <p>通过函数来构建程序</p>
            </section>

            <!-- Slide 5: FP Concepts -->
            <section>
                <h2>函数式编程核心概念</h2>
                <h3>FP Concepts</h3>
                <div class="concept-list">
                    <ul>
                        <li><strong>高阶函数</strong> (Higher-Order Functions, HOF)</li>
                        <li><strong>代数数据类型</strong> (Algebraic Data Types, ADT)</li>
                        <li><strong>模式匹配</strong> (Pattern Matching)</li>
                        <li><strong>纯函数</strong> (Purity)</li>
                        <li><strong>不可变性</strong> (Immutability)</li>
                        <li><strong>完全性</strong> (Totality)</li>
                        <li><strong>惰性求值</strong> (Laziness)</li>
                    </ul>
                </div>
            </section>

            <!-- Slide 6: Haskell Features -->
            <section>
                <h2>Haskell 特性</h2>
                <h3>Haskell Features</h3>
                <ul>
                    <li><strong>静态类型</strong>与<strong>类型推断</strong> (Static typing + Type inference)</li>
                    <li><strong>自动柯里化</strong> (Automatic currying)</li>
                    <li><strong>多态</strong> (Polymorphisms)</li>
                    <li><strong>布局敏感</strong> (Layout-sensitivity)</li>
                    <li><strong>垃圾回收</strong> (Garbage collector)</li>
                    <li><strong>绿色线程</strong> (Green threads)</li>
                </ul>
            </section>

            <!-- Slide 7: Haskell Toolchain -->
            <section>
                <h2>Haskell 工具链</h2>
                <h3>Haskell Toolchain</h3>
                <ul>
                    <li><strong>GHC</strong>: 编译器 (Compiler)</li>
                    <li><strong>GHCi</strong>: 交互式 REPL (Interactive REPL)</li>
                    <li><strong>ghcup</strong>: 工具链安装器 (Toolchain installer)</li>
                    <li><strong>cabal / stack</strong>: 构建工具 (Build tools)</li>
                    <li><strong>HLS</strong>: 语言服务器 (Language Server)</li>
                </ul>
            </section>

            <!-- Slide 8: GHCi -->
            <section>
                <h2>GHCi - 交互式解释器</h2>
                <h3>GHC interactive</h3>
                <p>在终端中启动 GHCi：</p>
                <pre><code class="bash">$ ghci
GHCi, version 9.2.5: https://www.haskell.org/ghc/
:? for help
ghci&gt;</code></pre>
                <p>现在你可以开始实验 Haskell 代码了！</p>
            </section>

            <!-- Slide 9: GHCi Arithmetic -->
            <section>
                <h2>GHCi：算术运算</h2>
                <h3>GHCi: Arithmetic</h3>
                <pre><code class="haskell">ghci> 3 + 4
7

ghci> 2 ^ 16
65536

ghci> 100 / 8
12.5

ghci> 0.1 + 0.2
0.30000000000000004  -- 浮点数精度问题！</code></pre>
            </section>

            <!-- Slide 10: GHCi Comparison -->
            <section>
                <h2>GHCi：比较运算</h2>
                <h3>GHCi: Comparison</h3>
                <pre><code class="haskell">ghci> 2 + 2 == 5
False

ghci> 2 + 2 == 4
True

ghci> "hello" == "world"
False

ghci> 5 < 10
True</code></pre>
            </section>

            <!-- Slide 11: GHCi Logic -->
            <section>
                <h2>GHCi：逻辑运算</h2>
                <h3>GHCi: Logic</h3>
                <pre><code class="haskell">ghci> 1 < 3 && 2 <= 4
True

ghci> 1 < 3 || 2 >= 4
True

ghci> not True
False

ghci> not (5 > 3)
False</code></pre>
            </section>

            <!-- Slide 12: GHCi Calling functions -->
            <section>
                <h2>GHCi：调用函数</h2>
                <h3>GHCi: Calling functions</h3>
                <pre><code class="haskell">ghci> not True
False

ghci> div 7 3
2

ghci> max (2 * 3) (3 ^ 2)
9

ghci> min 5 10
5</code></pre>
                <p class="small-text">函数调用不需要括号，只需空格分隔参数</p>
            </section>

            <!-- Slide 13: () are important -->
            <section>
                <h2>括号很重要！</h2>
                <h3>() are important!</h3>
                <pre><code class="haskell">-- 正确：先计算 2 * 3，再作为参数传递
ghci> max (2 * 3) (3 ^ 2)
9

-- 错误：max 函数接收了太多参数！
ghci> max 2 * 3 3 ^ 2
error: ...

-- 正确的理解：max 2 * 3 3 ^ 2
-- 等价于：((max 2) * 3 3) ^ 2</code></pre>
            </section>

            <!-- Slide 14: Types -->
            <section>
                <h2>类型</h2>
                <h3>Types</h3>
                <p>Haskell 中的每个表达式都有类型</p>
                <pre><code class="haskell">ghci> :type True
True :: Bool

ghci> :t 'F'
'F' :: Char

ghci> :t 21
21 :: Num p => p

ghci> :t not
not :: Bool -> Bool</code></pre>
                <p class="small-text">使用 <code>:type</code> 或 <code>:t</code> 查看类型</p>
            </section>

            <!-- Slide 15: Types of numbers -->
            <section>
                <h2>数字的类型</h2>
                <h3>Types of numbers</h3>
                <pre><code class="haskell">-- 整数类型
ghci> :t (42 :: Int)
42 :: Int

ghci> :t (42 :: Integer)
42 :: Integer

-- 浮点数类型
ghci> :t (3.14 :: Float)
3.14 :: Float

ghci> :t (3.14 :: Double)
3.14 :: Double</code></pre>
                <p class="small-text"><code>Int</code>: 固定精度整数 | <code>Integer</code>: 任意精度整数</p>
            </section>

            <!-- Slide 16: Types of functions -->
            <section>
                <h2>函数的类型</h2>
                <h3>Types of functions</h3>
                <pre><code class="haskell">ghci> :t div
div :: Integral a => a -> a -> a

ghci> :t max
max :: Ord a => a -> a -> a

ghci> :t not
not :: Bool -> Bool</code></pre>
                <p class="small-text"><code>-></code> 表示函数类型</p>
                <p class="small-text"><code>Integral a =></code> 表示类型约束</p>
            </section>

            <!-- Slide 17: List -->
            <section>
                <h2>列表</h2>
                <h3>List</h3>
                <pre><code class="haskell">-- 列表字面量
ghci> [3, 1, 2]
[3,1,2]

-- 连接列表
ghci> [1, 5] ++ [3, 4, 2]
[1,5,3,4,2]

-- 列表函数
ghci> head [3, 1, 2]
3

ghci> tail [3, 1, 2]
[1,2]

ghci> take 2 [4, 3, 7, 10, 9]
[4,3]

-- 列表范围
ghci> [1 .. 10]
[1,2,3,4,5,6,7,8,9,10]</code></pre>
            </section>

            <!-- Slide 18: Lazy evaluation -->
            <section>
                <h2>惰性求值</h2>
                <h3>Lazy evaluation</h3>
                <p>Haskell 只在需要时才计算表达式</p>
                <pre><code class="haskell">-- 无限列表！
ghci> [1..]
[1,2,3,4,5,6,7,8,9,10,11...

-- 但我们可以取其中的一部分
ghci> take 5 [1..]
[1,2,3,4,5]

-- 倒序的无限列表
ghci> take 5 [100, 99..]
[100,99,98,97,96]</code></pre>
                <p class="small-text">表达式仅在需要时求值</p>
            </section>

            <!-- Slide 19: String -->
            <section>
                <h2>字符串</h2>
                <h3>String</h3>
                <p>字符串本质上是字符列表</p>
                <pre><code class="haskell">ghci> :t "hello"
"hello" :: [Char]

-- 字符串就是 [Char]
ghci> ['H', 'i']
"Hi"

-- 可以使用列表函数
ghci> head "Hello"
'H'

ghci> tail "Hello"
"ello"

ghci> "Hello" ++ " " ++ "World"
"Hello World"</code></pre>
            </section>

            <!-- Slide 20: Syntax - Functions -->
            <section>
                <h2>语法：定义函数</h2>
                <h3>Syntax: Define Functions</h3>
                <pre><code class="haskell">-- 简单函数
increase :: Integer -> Integer
increase x = x + 1

-- 使用守卫 (guards)
sign :: Int -> String
sign n
    | n == 0    = "Zero"      -- 零
    | n < 0     = "Negative"  -- 负数
    | otherwise = "Positive"  -- 正数

-- 使用 if-then-else
absolute :: Int -> Int
absolute n = if n < 0 then -n else n</code></pre>
            </section>

            <!-- Slide 21: Syntax - let, where -->
            <section>
                <h2>语法：let 和 where</h2>
                <h3>Syntax: let and where</h3>
                <pre><code class="haskell">-- 使用 let-in 定义局部变量
circleArea :: Double -> Double
circleArea r =
    let pi = 3.14159
        square x = x * x
    in pi * square r

-- 使用 where 定义辅助函数
circleArea' :: Double -> Double
circleArea' r = pi * square r
  where
    pi = 3.14159
    square x = x * x</code></pre>
            </section>

            <!-- Slide 22: Recursion -->
            <section>
                <h2>递归</h2>
                <h3>Recursion</h3>
                <p>递归是 Haskell 中代替循环的主要方式</p>
                <pre><code class="haskell">-- 计算列表中某元素出现的次数
count :: Int -> [Int] -> Int
count n list = go 0 list
  where
    go result l =
        if null l
        then result
        else if head l == n
             then go (result + 1) (tail l)
             else go result (tail l)

-- 使用示例
-- count 3 [1,3,5,3,7,3] => 3</code></pre>
            </section>

            <!-- Slide 23: Higher-Order Functions -->
            <section>
                <h2>高阶函数</h2>
                <h3>Higher-Order Functions</h3>
                <p>函数可以接收函数作为参数，也可以返回函数</p>
                <pre><code class="haskell">-- 接收函数作为参数
applyToSame :: (Int -> Int -> Int) -> Int -> Int
applyToSame f x = f x x

ghci> applyToSame (*) 5
25

-- Lambda 函数
ghci> (\x -> x > 0) 5
True

-- map: 将函数应用到列表每个元素
ghci> map (* 2) [1 .. 5]
[2,4,6,8,10]

-- filter: 过滤列表元素
ghci> filter (> 3) [10,9..0]
[10,9,8,7,6,5,4]</code></pre>
            </section>

            <!-- Slide 24: Common HOFs -->
            <section>
                <h2>常用高阶函数</h2>
                <h3>Common Higher-Order Functions</h3>
                <pre><code class="haskell">-- map: 映射
ghci> map (+ 1) [1, 2, 3]
[2,3,4]

-- filter: 过滤
ghci> filter even [1..10]
[2,4,6,8,10]

-- any: 任一满足
ghci> any (> 5) [1, 2, 3]
False

-- all: 全部满足
ghci> all (> 0) [1, 2, 3]
True

-- concatMap: 映射并连接
ghci> concatMap (\x -> [x, x*2]) [1, 2, 3]
[1,2,2,4,3,6]</code></pre>
            </section>

            <!-- Slide 25: Pattern Matching -->
            <section>
                <h2>模式匹配</h2>
                <h3>Pattern Matching</h3>
                <p>更优雅的方式定义函数</p>
                <pre><code class="haskell">-- 列表模式匹配
isEmpty :: [a] -> Bool
isEmpty [] = True
isEmpty _  = False

-- 提取列表元素
firstTwo :: [a] -> Maybe (a, a)
firstTwo (x:y:_) = Just (x, y)
firstTwo _       = Nothing

-- 递归与模式匹配
length' :: [a] -> Int
length' []     = 0
length' (_:xs) = 1 + length' xs</code></pre>
            </section>

            <!-- Slide 26: Recap GHCi commands -->
            <section>
                <h2>GHCi 命令回顾</h2>
                <h3>Recap: GHCi commands</h3>
                <table style="font-size: 0.7em;">
                    <tr>
                        <td><code>:q</code></td>
                        <td>退出 GHCi (quit)</td>
                    </tr>
                    <tr>
                        <td><code>:t</code></td>
                        <td>显示类型 (show type)</td>
                    </tr>
                    <tr>
                        <td><code>:t +d</code></td>
                        <td>显示默认类型 (show type with defaulting)</td>
                    </tr>
                    <tr>
                        <td><code>:l</code></td>
                        <td>加载模块 (load module)</td>
                    </tr>
                    <tr>
                        <td><code>:r</code></td>
                        <td>重新加载 (reload)</td>
                    </tr>
                    <tr>
                        <td><code>:i</code></td>
                        <td>显示信息 (information)</td>
                    </tr>
                    <tr>
                        <td><code>:?</code></td>
                        <td>显示帮助 (help)</td>
                    </tr>
                </table>
            </section>

            <!-- Slide 27: Practice Time -->
            <section>
                <h2>练习时间！</h2>
                <h3>Practice Time!</h3>
                <p>现在开始动手实践：</p>
                <ul>
                    <li>打开 GHCi 尝试示例代码</li>
                    <li>完成 <code>BasicDrills.hs</code> 的基础练习</li>
                    <li>挑战 <code>Lecture1.hs</code> 的 7 个核心练习</li>
                    <li>探索 <code>InteractiveExamples.hs</code></li>
                    <li>尝试 <code>Challenges.hs</code> 的高级题目</li>
                </ul>
                <br>
                <p><strong>记住：实践是最好的学习方式！</strong></p>
            </section>

            <!-- Slide 28: Resources -->
            <section>
                <h2>学习资源</h2>
                <h3>Resources</h3>
                <ul>
                    <li><a href="https://www.haskell.org/">Haskell 官方网站</a></li>
                    <li><a href="http://learnyoua.haskell.sg/">Learn You a Haskell</a></li>
                    <li><a href="https://github.com/haskell-beginners-2022/course-plan">原始课程</a></li>
                    <li><a href="http://cnhaskell.com/">Real World Haskell (中文)</a></li>
                </ul>
                <br><br>
                <p class="small-text">本幻灯片翻译自 <a href="https://slides.com/haskellbeginners2022/lecture-1">Haskell Beginners 2022 - Lecture 1</a></p>
            </section>

            <!-- Slide 29: Thank you -->
            <section>
                <h1>谢谢！</h1>
                <h2>Thank You!</h2>
                <p>开始你的 Haskell 学习之旅吧！</p>
                <p>Happy Haskell coding!</p>
            </section>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/dist/reveal.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/plugin/highlight/highlight.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/plugin/notes/notes.js"></script>
    <script>
        Reveal.initialize({
            hash: true,
            plugins: [ RevealHighlight, RevealNotes ],
            slideNumber: true,
            transition: 'slide'
        });
    </script>
</body>
</html>
